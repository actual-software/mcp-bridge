
server:
  port: 8443
  bind_addr: "0.0.0.0:8443"
  metrics_port: 9091
  health_port: 9092
  max_connections: 5
  tls:
    enabled: true
    cert_file: "/etc/mcp-gateway/tls/tls.crt"
    key_file: "/etc/mcp-gateway/tls/tls.key"
    min_version: "1.2"
  frontends:
    - name: "websocket"
      protocol: "websocket"
      enabled: true
      config:
        port: 8443
        bind_addr: "0.0.0.0:8443"
        path: "/ws"
        tls:
          enabled: true
          cert_file: "/etc/mcp-gateway/tls/tls.crt"
          key_file: "/etc/mcp-gateway/tls/tls.key"
          min_version: "1.2"
    - name: "http"
      protocol: "http"
      enabled: true
      config:
        port: 8444
        bind_addr: "0.0.0.0:8444"
        path: "/mcp"
        tls:
          enabled: true
          cert_file: "/etc/mcp-gateway/tls/tls.crt"
          key_file: "/etc/mcp-gateway/tls/tls.key"
          min_version: "1.2"

auth:
  provider: "jwt"
  jwt:
    secret_key_env: "JWT_SECRET_KEY"
    issuer: "mcp-gateway-e2e"
    audience: "mcp-clients"

service_discovery:
  provider: "static"
  static:
    endpoints:
      default:
        - url: "http://backend-1:3000/mcp"
        - url: "http://backend-2:3000/mcp"
        - url: "http://backend-3:3000/mcp"

routing:
  strategy: "round_robin"
  health_check_interval: "30s"
  circuit_breaker:
    failure_threshold: 3
    success_threshold: 2
    timeout: 10

# Stricter rate limiting for testing
rate_limit:
  requests_per_second: 50
  burst: 80
  per_ip_connection_limit: 20

sessions:
  provider: "redis"
  redis:
    url: "redis://redis:6379/0"

logging:
  level: "debug"
  format: "json"

metrics:
  enabled: true
